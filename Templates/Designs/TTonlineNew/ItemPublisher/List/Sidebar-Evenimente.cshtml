@using Dynamicweb.Frontend
@Include("/Files/Templates/Designs/TTonline/Custom/GlobalVariables.cshtml")
@Include("/Files/Templates/Designs/TTonline/Includes/ArticleHelper.cshtml")
@Include("/Files/Templates/Designs/TTonline/Includes/GetImage_new.cshtml")

<h3 class="block-title">
	<span><a href="Default.aspx?ID=4258">@Translate("Evenimente","Evenimente") </a></span>
</h3>

<div id="myCarousel" class="carousel slide" data-ride="carousel">

  <!-- Wrapper for slides -->
  <div class="carousel-inner" role="listbox">
  	@if(GetBoolean("ItemPublisher:Items.Any")){
			foreach(var item in GetLoop("ItemPublisher:Items.List")){ 
			
	 	 	string titlu = item.GetString("ItemPublisher:Item.Titlu.Value");
		  	
    
    		string mainImageRaw = item.GetString("ItemPublisher:Item.Afis.Value");
        	string mainImage = !string.IsNullOrEmpty(mainImageRaw) ? GetImage(mainImageRaw, 350, 230) + "&bgcolor=white" : "/Files/Images/NoImage/350x230.png";   		
			
    
		  	string descriere = item.GetString("ItemPublisher:Item.Descriere.Value");
		  	string urlEveniment = item.GetString("ItemPublisher:Item.Url");	
    		string shortDescription = !string.IsNullOrEmpty(item.GetString("ItemPublisher:Item.DescriereScurta.Value")) ? item.GetString("ItemPublisher:Item.DescriereScurta.Value") : "Eveniment fara descriere";		
    		//string truncated = shortDescription.Substring(0,130) + "..." : shortDescription; 
   
 		    <div class="item">
               	<figure class="image-overlay">
					<img src="@mainImage" class="img-responsive">
              	</figure>
                <span>@titlu</span>
                        
             	<p style="max-height:100px; overflow:hidden;">@shortDescription  </p> 
              	@if(GetInteger("DwAreaID") == 1){
					<a href="@urlEveniment" style="z-index: 200;">Mai mult</a>
    			}else{
					<a href="@urlEveniment" style="z-index: 200;">Read More</a>
				}
		    </div>
     
	    }
		}
  </div>

  <a class="carousel-control" href="#myCarousel" role="button" data-slide="prev" style="color: #ffa700;">
    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control" href="#myCarousel" role="button" data-slide="next" style="right: 0; left: auto; color: #ffa700;">
    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

<script type="text/javascript">
	$(".carousel-inner .item:first-child").addClass('active');

	$(".glyphicon-chevron-right").hide();
	$(".glyphicon-chevron-left").hide();

	$('#myCarousel').hover(function() {
		$(".glyphicon-chevron-right").show();
		$(".glyphicon-chevron-left").show();
	}, function() {
		$(".glyphicon-chevron-right").hide();
		$(".glyphicon-chevron-left").hide();
	});
</script>


